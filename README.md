
# Perspective Transformation

სურათის პერსპექტივის ტრანსფორმაცია OpenCV-ის გამოყენებით, რომლის შედეგადაც ობიექტები სურათის სიბრტყის პარალელული ხდება. 

## აღწერა

ოთხი წერტილი, რომელთა კოორდინატებიც მოცემულია სკრიპტში, ტრანსფორრმირებული ფოტოს წვეროებად გადადის. მოცემულია ახალი სურათის სიგრძის რეალური ზომა და გამოითვლება მეტრი/პიქსელის ფარდობა. ამის დახმარებით ნებისმიერ ორ წერტილს შორის რეალური მანძილის გამოთვლა შეიძლება. 





## გაშვება

```bash
  python perspective_transform.py

```
## ინსტრუქცია

კოდის გაშვების შემდეგ ეკრანზე გამოდის საწყისი სურათი.
სურათზე ორი წერტილის მონიშვნის შემდეგ ეკრანზე დაიწერება რეალური მანძილი ამ ორ წერტილს შორის.
წყვილი წერტილების მონიშვნა შეიძლება, სანამ 'q' ღილაკზე დააჭერენ.



## პარამეტრები

```http
  GET /api/items/${id}
```

#### getpoints(event, x, y, flags, param)

| Parameter | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `event`   | `int`    | OpenCV (`cv2.EVENT_LBUTTONDOWN`)  |
| `x`       | `int`    | X-კოორდინატი,რომელიც მაუსზე დაჭერით ინიშნება |
| `y`       | `int`    | Y-კოორდინატი,რომელიც მაუსზე დაჭერით ინიშნება  |

მომხმარერებლის მონიშნულ წერტილებს ინახავს და იძახებს მანძილის გამომთვლელ ფუნქციას.

#### getDistance()

| Parameter    | Type     | Description                                                  |
| :----------- | :------- | :----------------------------------------------------------- |
| `user_points` | `list`   |მომხმარებლის მონიშნული წერტილების სია |
| `og_width`    | `int`    | ტრანსფორმირებული ფოტოს სიგრძის რეალური ზომა |

სურათის ტრანსფორმაციას ახდენს, მას შემდეგ რაც გამოთვლის ტრანსფორმაციის მატრიცას.
მატრიცით მონიშნული წერტილების ახალ კოორდინატებს ითვლის ტრანსფორმირებულ სურათზე და პიქსელურ მანძილს მათ შორის.
მეტრი/პიქსელის ფარდობით ითვლის რეალურ მანძილს ორ წერტილს შორის.

#### perspectiveTransform()

| Parameter   | Type      | Description                                                  |
| :---------- | :-------- | :----------------------------------------------------------- |
| `points`    | `list`    | ოთხი წერტილის კოორდინატი, რომლითაც ტრანსფორმაცია სრულდება |
| `img`       | `numpy.ndarray` | სურათი, რომლის ტრანსფორმაციაც სრულდება |
| `og_width`  | `int`     | საწყისი სურათის სიგრძე პიქსელური |
| `og_height` | `int`     | საწყისი სურათის სიგანე პიქსელური |

ოთხი წერტილი ქმნის მართკუთხედს. რომლის სიგრძის და სიგანის შეფარდება მოცემულია კოდში - "ratio". მისი დახმარებით გამოითვლება ტრანსფორმირებული ფოტოს ზომები შემდეგნაირად: სიგრძე რჩება იგივე, რაც საწყისი სურათის სიგრძე იყო, ხოლო სიგანე ratio-ზე გამრავლებით.
საწყისი წერტილები გადადის ახალი სურათის წვეროებში და მიიღება კოორდინატების მეორე სია. ამ ორი სიის დახმარებით გამოითვლება ტრანსფორმაციის მატრიცა და ხდება სურათის ტრანსფორმაცია.






## output

ეკრანზე იბეჭდება მანძილი მეტრებში (დამრგვალებული), ყველა იმ ორ წერტილს შორის, რომლებიც მოინიშნება. 

ტრანსფორმირებული სურათი შეინახება როგორც 'output/transformed_image2.jpg'.
